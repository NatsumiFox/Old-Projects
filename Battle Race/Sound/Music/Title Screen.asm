; ===========================================================================
; ---------------------------------------------------------------------------
; Title Screen - Battle Race
; ---------------------------------------------------------------------------

TitleScreen_Header:
		sHeaderInit
		sHeaderPatch	TS_Patches
		sHeaderCh	$06, $03
		sHeaderTempo	$01, $60
		sHeaderDAC	TS_DAC
		sHeaderFM	TS_FM1, $00, $10
		sHeaderFM	TS_FM2, $00, $08
		sHeaderFM	TS_FM3, $00, $20
		sHeaderFM	TS_FM4, $00, $08
		sHeaderFM	TS_FM5, $00, $20
		sHeaderPSG	TS_PSG1, $00, $00, $00, VolEnv_00
		sHeaderPSG	TS_PSG2, $00, $00, $00, VolEnv_00
		sHeaderPSG	TS_PSG3, $00, $01, $00, VolEnv_00

; ===========================================================================
; ---------------------------------------------------------------------------
; DAC
; ---------------------------------------------------------------------------

TS_DAC:
		dc.b	$A9,$10

TS_DAC_Loop:
		dc.b	$B7,$20
		sLoop	$00,$03,TS_DAC_Loop
		dc.b	$B7,$10,$81,$B7,$10,$08,$81,$08,$08,$04,$04,$04,$04,$02,$02,$02,$02

TS_DAC_MainLoop:
		dc.b	$A8,$08,$89,$81,$89
		dc.b	$A8,$08,$89,$81,$89
		dc.b	$A8,$08,$89,$81,$89
		dc.b	$A8,$08,$89,$81,$87
		dc.b	$A8,$08,$89,$81,$89
		dc.b	$A8,$08,$89,$81,$89
		dc.b	$A8,$08,$89,$A8,$89
		dc.b	$8F,$04,$8F,$89,$8F,$88,$08,$89

		sJump	TS_DAC_MainLoop

; ===========================================================================
; ---------------------------------------------------------------------------
; FM 1
; ---------------------------------------------------------------------------

TS_FM1:
		dc.b	$80,$10

TS_FM1_Loop:
		dc.b	$80,$40
		sLoop	$00,$03,TS_FM1_Loop
		sPatFM	$01

TS_FM1_MainLoop:
		dc.b	$A5,$1E,$80,$02
		dc.b	$A0,$1E,$80,$02
		dc.b	$A2,$1E,$80,$02
		dc.b	$9D,$1E,$80,$02
		dc.b	$A5,$1E,$80,$02
		dc.b	$A2,$1E,$80,$02
		dc.b	$9D,$1E,$80,$02
		dc.b	$A0,$1E,$80,$02
		sJump	TS_FM1_MainLoop

; ===========================================================================
; ---------------------------------------------------------------------------
; FM 2
; ---------------------------------------------------------------------------

TS_FM2:
		dc.b	$80,$10
		dc.b	$80,$40
		sCall	TS_FM2_GuitarIntro
		saVolFM	$04
		sPatFM	$00

TS_FM2_MainLoop:
		sCall	TS_FM2_Melody

		dc.b	$80,$08

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$BC,$02
		sModOff
		dc.b	sHold
		dc.b	$BD,$0C,$80,$02

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$C0,$02
		sModOff
		dc.b	sHold
		dc.b	$C1,$0C,$80,$02

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$C3,$02
		sModOff
		dc.b	sHold
		dc.b	$C4,$0C,$80,$02

		ssModZ80 $01,$01,$F0,$FF
		dc.b	$C2,$02
		sModOff
		dc.b	sHold
		dc.b	$C1,$0C,$80,$02

		ssModZ80 $01,$01,$F0,$FF
		dc.b	$C0,$02
		sModOff
		dc.b	sHold
		dc.b	$BF,$0C,$80,$02

		ssModZ80 $01,$01,$F0,$FF
		dc.b	$BE,$02
		sModOff
		dc.b	sHold
		dc.b	$BD,$1C,$80,$02

		dc.b	$80,$08

		sCall	TS_FM2_Melody

		dc.b	$80,$08

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$BC,$02
		sModOff
		dc.b	sHold
		dc.b	$BD,$0C,$80,$02

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$C0,$02
		sModOff
		dc.b	sHold
		dc.b	$C1,$04,$80,$02

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$C3,$02
		sModOff
		dc.b	sHold
		dc.b	$C4,$04,$80,$02

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$C7,$02
		sModOff
		dc.b	sHold
		dc.b	$C8,$0C,$80,$02

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$C8,$02
		sModOff
		dc.b	sHold
		dc.b	$C9,$0C,$80,$02

		ssModZ80 $01,$01,$F0,$FF
		dc.b	$C9,$02
		sModOff
		dc.b	sHold
		dc.b	$C8,$0C,$80,$02

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$CA,$02
		sModOff
		dc.b	sHold
		dc.b	$CB,$1C,$80,$02

		dc.b	$80,$08

		sJump	TS_FM2_MainLoop

	; --- Repetetive melody ---

TS_FM2_Melody:
		ssModZ80 $01,$01,$0C,$FF
		dc.b	$BC,$02
		sModOff
		dc.b	sHold
		dc.b	$BD,$0C,$80,$02

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$C0,$02
		sModOff
		dc.b	sHold
		dc.b	$C1,$0C,$80,$02

		ssModZ80 $01,$01,$F0,$FF
		dc.b	$BD,$02
		sModOff
		dc.b	sHold
		dc.b	$BC,$0C,$80,$02

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$C0,$02
		sModOff
		dc.b	sHold
		dc.b	$C1,$0C,$80,$02

		ssModZ80 $01,$01,$F0,$FF
		dc.b	$BB,$02
		sModOff
		dc.b	sHold
		dc.b	$BA,$0C,$80,$02

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$BC,$02
		sModOff
		dc.b	sHold
		dc.b	$BD,$0C,$80,$02

		ssModZ80 $01,$01,$F0,$FF
		dc.b	$B9,$02
		sModOff
		dc.b	sHold
		dc.b	$B8,$0C,$80,$02

		ssModZ80 $01,$01,$0C,$FF
		dc.b	$BB,$02
		sModOff
		dc.b	sHold
		dc.b	$BC,$0C,$80,$02

		sRet

	; --- Guitar intro ---

TS_FM2_GuitarIntro:
		sPatFM	$03

		dc.b	$A5,$0C
		saVolFM	$10
		dc.b	$0C
		saVolFM	$08
		dc.b	$08
		saVolFM	$E8

		dc.b	$A4,$0C
		saVolFM	$10
		dc.b	$0C
		saVolFM	$08
		dc.b	$08
		saVolFM	$E8

		dc.b	$A2,$0C
		saVolFM	$10
		dc.b	$04
		saVolFM	$F0

		dc.b	$A5,$08,$A7,$A9,$0C
		saVolFM	$10
		dc.b	$04
		saVolFM	$F0

		dc.b	$A7,$0C
		saVolFM	$10
		dc.b	$04
		saVolFM	$F0

		sRet
; ===========================================================================
; ---------------------------------------------------------------------------
; FM 3
; ---------------------------------------------------------------------------

TS_FM3:
		dc.b	$80,$10
		sPatFM	$04
		saDetune $FE

TS_FM3_Loop:
		dc.b	$A5,$40
		sLoop	$00,$0B,TS_FM3_Loop

		sPatFM	$03
		saVolFM	$EC-$04
		saTranspose $F4
		sJump	TS_FM2_MainLoop

; ===========================================================================
; ---------------------------------------------------------------------------
; FM 4
; ---------------------------------------------------------------------------

TS_FM4:
		dc.b	$80,$10
		dc.b	$80,$40
		saDetune $FE
		sCall	TS_FM2_GuitarIntro

		saDetune $FC
		sPatFM	$02
		saVolFM	$06
		sJump	TS_FM1_MainLoop

; ===========================================================================
; ---------------------------------------------------------------------------
; FM 5
; ---------------------------------------------------------------------------

TS_FM5:
		dc.b	$80,$10
		sPatFM	$04

TS_FM5_MainLoop:
		dc.b	$A5,$40
		sJump	TS_FM5_MainLoop

; ===========================================================================
; ---------------------------------------------------------------------------
; PSG 1
; ---------------------------------------------------------------------------

TS_PSG1:
		sStop

; ===========================================================================
; ---------------------------------------------------------------------------
; PSG 2
; ---------------------------------------------------------------------------

TS_PSG2:
		sStop

; ===========================================================================
; ---------------------------------------------------------------------------
; PSG 3
; ---------------------------------------------------------------------------

TS_PSG3:
		dc.b	$80,$10

		sNoisePSG $E7
		sVolEnvPSG $02

TS_PSG3_MainLoop:
		dc.b	nBb6,$04,$04,$04,$04,$04,$04
		sVolEnvPSG $05
		dc.b	$04
		sVolEnvPSG $02
		dc.b	$04
		sJump	TS_PSG3_MainLoop

; ===========================================================================
; ---------------------------------------------------------------------------
; Instruments/Patches
; ---------------------------------------------------------------------------

TS_Patches:

	; 00 - Bell

	dc.b	$04
	dc.b	$3A,$32,$7A,$72, $5F,$4E,$5F,$4E, $0A,$0A,$0A,$0A
	dc.b	$01,$01,$01,$01, $40,$47,$40,$47, $22,$80,$22,$80

	; 01 - Bass (Gravely version)

	dc.b	$3A
	dc.b	$72,$3E,$20,$31, $9C,$DB,$87,$DA, $00,$00,$00,$02
	dc.b	$00,$00,$00,$00, $0F,$0F,$0F,$AF, $20,$30,$31,$80

	; 02 - Bass (Flutey version)

	dc.b	$3A
	dc.b	$62,$3E,$26,$31, $9C,$DB,$9C,$DA, $00,$00,$00,$02
	dc.b	$00,$00,$00,$00, $0F,$0F,$0F,$AF, $20,$28,$34,$80

	; 03 - Pluck Guitar

	dc.b	$2A
	dc.b	$31,$7A,$15,$72, $9F,$DF,$9F,$1F, $04,$04,$04,$0C
	dc.b	$00,$00,$00,$08, $00,$10,$10,$56, $24,$26,$1C,$80

	; 04 - Backdrop Synth

	dc.b	$3C
	dc.b	$34,$78,$34,$72, $5C,$4D,$5C,$4D, $00,$04,$04,$04
	dc.b	$00,$00,$00,$00, $00,$10,$40,$18, $16,$80,$30,$80

; ===========================================================================